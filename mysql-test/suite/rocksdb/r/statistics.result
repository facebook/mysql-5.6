DROP TABLE IF EXISTS t1;
DROP TABLE IF EXISTS t2;
DROP TABLE IF EXISTS t3;
DROP TABLE IF EXISTS t4;
DROP TABLE IF EXISTS t5;
create table t1(id bigint not null primary key auto_increment, a varchar(255) not null, b bigint) engine=rocksdb;
create table t2(id bigint not null primary key auto_increment, a varchar(255) not null, b bigint) engine=rocksdb;
insert t2(a, b) select a, b from t1;
create table t3(id bigint not null primary key auto_increment, a varchar(255) not null, b bigint) engine=rocksdb;
insert t3(a, b) select a, b from t1;
create table t4(id bigint not null primary key auto_increment, a varchar(255) not null, b bigint) engine=rocksdb;
insert t4(a, b) select a, b from t1;
create table t5(id bigint not null primary key auto_increment, a varchar(255) not null, b bigint) engine=rocksdb;
insert t5(a, b) select a, b from t1 where id < 50000;
create index t1_1 on t1(b);
create index t3_1 on t3(b) comment 'cf_t3';
create index t4_1 on t4(b) comment 'rev:cf_t4';
optimize table t1, t2, t3, t4, t5;
Table	Op	Msg_type	Msg_text
test.t1	optimize	status	OK
test.t2	optimize	status	OK
test.t3	optimize	status	OK
test.t4	optimize	status	OK
test.t5	optimize	status	OK
analyze table t1, t2, t3, t4, t5;
Table	Op	Msg_type	Msg_text
test.t1	analyze	status	OK
test.t2	analyze	status	OK
test.t3	analyze	status	OK
test.t4	analyze	status	OK
test.t5	analyze	status	OK
SELECT table_name, data_length, index_length, table_rows FROM information_schema.tables WHERE table_schema = DATABASE();
table_name	data_length	index_length	table_rows
t1	1881689	900006	100000
t2	2085406	0	100000
t3	2075960	893227	100000
t4	2075761	892489	100000
t5	927368	0	49999
create index t4_2 on t4(a);
optimize table t4;
Table	Op	Msg_type	Msg_text
test.t4	optimize	status	OK
analyze table t4;
Table	Op	Msg_type	Msg_text
test.t4	analyze	status	OK
SELECT table_name, data_length, index_length, table_rows FROM information_schema.tables WHERE table_schema = DATABASE();
table_name	data_length	index_length	table_rows
t1	1881689	900006	100000
t2	2085406	0	100000
t3	2075960	893227	100000
t4	1861049	2652908	100000
t5	927368	0	49999
SELECT table_name, data_length, index_length, table_rows FROM information_schema.tables WHERE table_schema = DATABASE();
table_name	data_length	index_length	table_rows
t1	0	0	1000
t2	0	0	1000
t3	0	0	1000
t4	0	0	1000
t5	0	0	1000
analyze table t1, t2, t3, t4, t5;
Table	Op	Msg_type	Msg_text
test.t1	analyze	status	OK
test.t2	analyze	status	OK
test.t3	analyze	status	OK
test.t4	analyze	status	OK
test.t5	analyze	status	OK
SELECT table_name, data_length, index_length, table_rows FROM information_schema.tables WHERE table_schema = DATABASE();
table_name	data_length	index_length	table_rows
t1	1881689	900006	100000
t2	2085406	0	100000
t3	2075960	893227	100000
t4	1861049	2652908	100000
t5	927368	0	49999
drop table t1;
drop table t2;
drop table t3;
drop table t4;
drop table t5;
