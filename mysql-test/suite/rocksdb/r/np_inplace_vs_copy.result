CREATE TABLE t1 (id INT AUTO_INCREMENT PRIMARY KEY) PARTITION BY RANGE(id) 
(PARTITION p0 VALUES LESS THAN (10), 
PARTITION p1 VALUES LESS THAN (20), 
PARTITION p2 VALUES LESS THAN (30), 
PARTITION p3 VALUES LESS THAN (40), 
PARTITION p4 VALUES LESS THAN (50), 
PARTITION p5 VALUES LESS THAN MAXVALUE);
INSERT INTO t1 VALUES (NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL),
(NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL),
(NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL),
(NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL),
(NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL),
(NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL), (NULL);
SELECT COUNT(id) FROM t1;
COUNT(id)
60
ALTER TABLE t1 ALGORITHM=COPY, DROP PARTITION p3;
SELECT PARTITION_NAME FROM information_schema.rocksdb_ddl WHERE TABLE_NAME="t1" ORDER BY PARTITION_NAME;
PARTITION_NAME
p0
p1
p2
p4
p5
SELECT COUNT(id) FROM t1;
COUNT(id)
60
SELECT COUNT(id) FROM t1 WHERE id >= 30 AND id < 40;
COUNT(id)
10
SELECT * from information_schema.partitions WHERE
TABLE_NAME="t1" ORDER by PARTITION_NAME;
TABLE_CATALOG	TABLE_SCHEMA	TABLE_NAME	PARTITION_NAME	SUBPARTITION_NAME	PARTITION_ORDINAL_POSITION	SUBPARTITION_ORDINAL_POSITION	PARTITION_METHOD	SUBPARTITION_METHOD	PARTITION_EXPRESSION	SUBPARTITION_EXPRESSION	PARTITION_DESCRIPTION	TABLE_ROWS	AVG_ROW_LENGTH	DATA_LENGTH	MAX_DATA_LENGTH	INDEX_LENGTH	DATA_FREE	CREATE_TIME	UPDATE_TIME	CHECK_TIME	CHECKSUM	PARTITION_COMMENT	NODEGROUP	TABLESPACE_NAME
def	test	t1	p0	NULL	1	NULL	RANGE	NULL	`id`	NULL	10	#	#	#	#	#	#	#	#	#	NULL		default	NULL
def	test	t1	p1	NULL	2	NULL	RANGE	NULL	`id`	NULL	20	#	#	#	#	#	#	#	#	#	NULL		default	NULL
def	test	t1	p2	NULL	3	NULL	RANGE	NULL	`id`	NULL	30	#	#	#	#	#	#	#	#	#	NULL		default	NULL
def	test	t1	p4	NULL	4	NULL	RANGE	NULL	`id`	NULL	50	#	#	#	#	#	#	#	#	#	NULL		default	NULL
def	test	t1	p5	NULL	5	NULL	RANGE	NULL	`id`	NULL	MAXVALUE	#	#	#	#	#	#	#	#	#	NULL		default	NULL
SELECT * FROM t1 PARTITION (p0);
id
1
2
3
4
5
6
7
8
9
SELECT * FROM t1 PARTITION (p1);
id
10
11
12
13
14
15
16
17
18
19
SELECT * FROM t1 PARTITION (p2);
id
20
21
22
23
24
25
26
27
28
29
SELECT * FROM t1 PARTITION (p4);
id
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
SELECT * FROM t1 PARTITION (p5);
id
50
51
52
53
54
55
56
57
58
59
60
ALTER TABLE t1 ALGORITHM=INPLACE, DROP PARTITION p2;
SELECT PARTITION_NAME FROM information_schema.rocksdb_ddl WHERE TABLE_NAME="t1" ORDER BY PARTITION_NAME;
PARTITION_NAME
p0
p1
p2
p4
p5
SELECT COUNT(id) FROM t1;
COUNT(id)
50
SELECT COUNT(id) FROM t1 WHERE id >= 20 AND id < 30;
COUNT(id)
0
SELECT * from information_schema.partitions WHERE
TABLE_NAME="t1" ORDER by PARTITION_NAME;
TABLE_CATALOG	TABLE_SCHEMA	TABLE_NAME	PARTITION_NAME	SUBPARTITION_NAME	PARTITION_ORDINAL_POSITION	SUBPARTITION_ORDINAL_POSITION	PARTITION_METHOD	SUBPARTITION_METHOD	PARTITION_EXPRESSION	SUBPARTITION_EXPRESSION	PARTITION_DESCRIPTION	TABLE_ROWS	AVG_ROW_LENGTH	DATA_LENGTH	MAX_DATA_LENGTH	INDEX_LENGTH	DATA_FREE	CREATE_TIME	UPDATE_TIME	CHECK_TIME	CHECKSUM	PARTITION_COMMENT	NODEGROUP	TABLESPACE_NAME
def	test	t1	p0	NULL	1	NULL	RANGE	NULL	`id`	NULL	10	#	#	#	#	#	#	#	#	#	NULL		default	NULL
def	test	t1	p1	NULL	2	NULL	RANGE	NULL	`id`	NULL	20	#	#	#	#	#	#	#	#	#	NULL		default	NULL
def	test	t1	p4	NULL	3	NULL	RANGE	NULL	`id`	NULL	50	#	#	#	#	#	#	#	#	#	NULL		default	NULL
def	test	t1	p5	NULL	4	NULL	RANGE	NULL	`id`	NULL	MAXVALUE	#	#	#	#	#	#	#	#	#	NULL		default	NULL
SELECT * FROM t1 PARTITION (p0);
id
1
2
3
4
5
6
7
8
9
SELECT * FROM t1 PARTITION (p1);
id
10
11
12
13
14
15
16
17
18
19
SELECT * FROM t1 PARTITION (p4);
id
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
SELECT * FROM t1 PARTITION (p5);
id
50
51
52
53
54
55
56
57
58
59
60
DROP TABLE t1;
