
#
# Tests concurrent inserts for tables with no primary key.
#

--source include/have_rocksdb.inc
--source suite/rocksdb/include/have_range_locking.inc

--disable_warnings
drop table if exists t1;
--enable_warnings

# create the test table
create table t1 (
  pk bigint primary key,
  group_list varchar(128),
  parent_id bigint
) engine=rocksdb;

set global rocksdb_lock_wait_timeout=10;
let $SERVER_PORT=`select @@port`;
let $exec = /usr/bin/python3 suite/rocksdb/t/range_locking_conc_test.py root 127.0.0.1 $SERVER_PORT test t1 2000 20 30000 10;

exec $exec;

DROP TABLE t1;
